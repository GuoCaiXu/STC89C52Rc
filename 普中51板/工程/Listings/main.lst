C51 COMPILER V9.60.0.0   MAIN                                                              10/19/2022 11:59:31 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          //外部中断0
   2          # include <reg52.h>
   3          # define uchar unsigned char
   4          # define uint unsigned int
   5          # define ulong unsigned long 
   6          
   7          sbit ADDR0 = P2^2;
   8          sbit ADDR1 = P2^3;
   9          sbit ADDR2 = P2^4;
  10          
  11          uchar code LedChar[] = {0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f};
  12          uchar LedBuff[] = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
  13          
  14          uchar flag = 0;
  15          
  16          void ShowLed(ulong num);
  17          void main(){
  18   1      
  19   1      ulong cnt = 0;
  20   1          ADDR0 = 0;
  21   1          ADDR1 = 0;
  22   1          ADDR2 = 0;
  23   1          
  24   1          EA  = 1;
  25   1          TMOD = 0x10;
  26   1          TH1 =0xfc;
  27   1          TL1 = 0x66;
  28   1          ET1 = 1;
  29   1          TR1 = 1;
  30   1          P0 = 0x00;
  31   1      
  32   1          while(1){
  33   2              if (flag == 1){
  34   3                  flag = 0;
  35   3                  ShowLed(cnt);
  36   3                  cnt++;
  37   3              }
  38   2          }
  39   1      }
  40          
  41          void ShowLed(ulong num){
  42   1          signed char i;
  43   1          uchar a[8];
  44   1          for (i = 0; i < 8; i++){
  45   2              a[i] = num % 10;
  46   2              num /= 10;
  47   2          }
  48   1          for (i = 7; i >= 1; i--){
  49   2              if (a[i] == 0) LedBuff[i] = 0x00;
  50   2              else break;
  51   2          }
  52   1          for (; i >= 0; i--){
  53   2              LedBuff[i] = LedChar[a[i]];
  54   2          }
C51 COMPILER V9.60.0.0   MAIN                                                              10/19/2022 11:59:31 PAGE 2   

  55   1      }
  56          
  57          void InterruptTime1() interrupt 3{
  58   1          static uint sec = 0;
  59   1          static uchar i = 0;
  60   1          
  61   1          TH1 = 0xfc;
  62   1          TL1 = 0x66;
  63   1          sec++;
  64   1          if (sec >= 1000){
  65   2              sec = 0;
  66   2              flag = 1;
  67   2          }
  68   1      
  69   1          P0 = 0x00;
  70   1          switch(i){
  71   2              case 0: ADDR0 = 0; ADDR1 = 0; ADDR2 = 0; i++; P0 = LedBuff[0]; break;
  72   2              case 1: ADDR0 = 1; ADDR1 = 0; ADDR2 = 0; i++; P0 = LedBuff[1]; break;
  73   2              case 2: ADDR0 = 0; ADDR1 = 1; ADDR2 = 0; i++; P0 = LedBuff[2]; break;
  74   2              case 3: ADDR0 = 1; ADDR1 = 1; ADDR2 = 0; i++; P0 = LedBuff[3]; break;
  75   2              case 4: ADDR0 = 0; ADDR1 = 0; ADDR2 = 1; i++; P0 = LedBuff[4]; break;
  76   2              case 5: ADDR0 = 1; ADDR1 = 0; ADDR2 = 1; i++; P0 = LedBuff[5]; break;
  77   2              case 6: ADDR0 = 0; ADDR1 = 1; ADDR2 = 1; i++; P0 = LedBuff[6]; break;
  78   2              case 7: ADDR0 = 1; ADDR1 = 1; ADDR2 = 1; i=0; P0 = LedBuff[7]; break;
  79   2          }
  80   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    434    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     12      17
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
