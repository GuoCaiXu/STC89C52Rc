C51 COMPILER V9.60.0.0   MAIN                                                              10/22/2022 11:49:37 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          # include <reg52.h>
   2          # define uchar unsigned char
   3          # define uint unsigned int
   4          
   5          void uart_init(uchar baud)
   6          {
   7   1        TMOD |= 0X20; //设置计数器工作方式2
   8   1        SCON = 0X50;  //设置为工作方式1
   9   1        PCON = 0X80;  //波特率加倍
  10   1        TH1=baud; //计数器初始值设置
  11   1        TL1=baud;
  12   1        ES=1;   //打开接收中断
  13   1        EA=1;   //打开总中断
  14   1        TR1=1;    //打开计数器   
  15   1      }
  16          
  17          void main()
  18          { 
  19   1        uart_init(0XFA);//波特率为9600
  20   1      
  21   1        while(1)
  22   1        {     
  23   2                    
  24   2        }   
  25   1      }
  26          
  27          void uart() interrupt 4 //串口通信中断函数
  28          {
  29   1        uchar _data;
  30   1      
  31   1        RI = 0;     //清除接收中断标志位
  32   1        _data = SBUF; //存储接收到的数据
  33   1        SBUF = _data; //将接收到的数据放入到发送寄存器
  34   1        while(!TI);   //等待发送数据完成
  35   1        TI=0;     //清除发送完成标志位       
  36   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     50    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
